<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="Images\favicon.png" loading="lazy" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.all.min.js"
        integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
        integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"
        integrity="sha512-onMTRKJBKz8M1TnqqDuGBlowlH0ohFzMXYRNebz+yOcc5TQr/zAKsthzhuv0hiyUKEiQEQXEynnXCvNTOk50dg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- jQuery for Toastr -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Toastr CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="script.js" defer></script>
    <title>DROMJOR VENTURES</title>
</head>

<body>
    <!-- Navigation Bar -->
    <nav id="nav" class="nav-bar">
        <div class="nav-logo">
            <img src="dromo-logo.png" alt="Logo" width="250" height="75" />
        </div>
        <div class="nav-logo-m">
            <img src="logo.png" alt="Logo" width="110" height="90" />
        </div>

        <div class="nav-toggle">
            <i class="fas fa-bars" id="open-nav"></i>
            <i class="fas fa-times" id="close-nav"></i>
        </div>
        <ul id="nav-links" class="nav-links show">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="about.html" class="nav-link">About Us</a></li>
            <li class="dropdown">
                <a href="#" class="nav-link dropdown-toggle">Shop <i class="bx bxs-chevron-down"></i></a>
                <ul class="dropdown-menu">
                    <li><a href="fresh.html">Fresh Produce</a></li>
                    <li><a href="dairy.html">Dairy Products</a></li>
                    <li><a href="meats.html">Meat and Seafood</a></li>
                    <li><a href="other.html">Others</a></li>
                </ul>
            </li>
            <!-- <li class="dropdown">
        <a href="#" class="nav-link dropdown-toggle">Accommodation <i class="bx bxs-chevron-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="office.html">Office Space</a></li>
          <li><a href="Bungalow.html">Bungalow</a></li>
          <li><a href="house.html">Housing</a></li>
        </ul>
      </li> -->
            <!-- <li class="dropdown">
        <a href="#" class="nav-link dropdown-toggle">Logistics <i class="bx bxs-chevron-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="equipment.html">Hiring Equipment</a></li>
          <li><a href="materials.html">Building Materials</a></li>
        </ul>
      </li> -->
            <!-- <li class="dropdown">
        <a href="#" class="nav-link dropdown-toggle">Mission & Vision <i class="bx bxs-chevron-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="news.html">Our Mission</a></li>
          <li><a href="price.html">Our Vision</a></li>
        </ul>
      </li> -->
            <li><a href="contact.html" class="nav-link">Contact</a></li>
            <li>
                <a href="tel:+2335948155987" class="btn-order">
                    <i class="fas fa-phone"></i>Call to Order<br> 05948155987
                </a>
            </li>
        </ul>
        <span class="cont">
            <button class="search-icon">
                <i class="fas fa-search"></i>
            </button>
            <ul>
                <li class="cart-item">
                    <i class="fa-solid fa-cart-shopping cart-icon" id="cart-icon"></i>
                    <span class="cart-notification" id="count">0</span>
                </li>
            </ul>
        </span>
    </nav>

    <!-- cart sidebar -->
    <div class="cart-sidebar">
        <div class="cart-header">
            <i class="fa-solid fa-xmark close-icon" id="close-icon"></i>
            <h2>My Cart</h2>
            <p id="cart-status">Your cart is empty</p>
        </div>
        <!-- This will be the container for the cart items -->
        <div class="cart-items">
        </div>

        <div class="cart-footer">
            <div class="subtotal">
                <span>Enter Amount</span>
                <span>
                    GH&#8373;
                    <input type="number" id="amount" value="00.00" min="0" step="0.01">
                </span>
            </div>
            <!-- <p>Shipping and taxes calculated at checkout.
          <a href="#">View Cart</a>
        </p> -->
            <button>Checkout</button>
            <p class="continue-shopping">or
                <a href="#">Continue Shopping â†’</a>
            </p>
        </div>
    </div>

    <!-- Slider -->
    <div class="slider-container">
        <div class="slider">
            <div class="slide active">
                <img src="https://i.postimg.cc/13xnvRT6/dromojor-Website-landscape.jpg" alt="Image 1">
                <div class="slide-content">
                    <h2>Fruits</h2>
                    <p>Get Healthy Fruits</p>
                    <button>Read More</button>
                </div>
            </div>
            <div class="slide">
                <img src="https://i.postimg.cc/t7GqNJT4/Ampesi-Banner-landscape.jpg" alt="Image 2">
                <div class="slide-content">
                    <h2>Plantain</h2>
                    <p>Get fresh plantains</p>
                    <button>Read More</button>
                </div>
            </div>
            <div class="slide">
                <img src="https://i.postimg.cc/LXz26Rvd/Breakfast-3x-landscape.jpg" alt="Image 3">
                <div class="slide-content">
                    <h2>Vegetables</h2>
                    <p>Get fresh vegetable</p>
                    <button>Read More</button>
                </div>
            </div>
        </div>
        <div class="slider-controls">
            <button class="prev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="next">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="pagination">
            <span class="pagination-item active"></span>
            <span class="pagination-item"></span>
            <span class="pagination-item"></span>
        </div>
    </div>

    <!-- Offers -->
    <section class="card-container">
        <!-- <h2>Image Gallery</h2> -->
        <div class="card-grid">
            <article class="card">
                <div class="card-content">
                    <!-- <h3 class="card-title">Offer 1</h3> -->
                    <img class="card-image" src="https://i.postimg.cc/wxQgCq7L/Laundry-Banner-landscape.jpg"
                        alt="Image 1">
                </div>
            </article>
            <article class="card">
                <div class="card-content">
                    <!-- <h3 class="card-title">Offer 2</h3> -->
                    <img class="card-image" src="https://i.postimg.cc/tCmQbYyZ/Fish-Market-landscape.jpg" alt="Image 2">
                </div>
            </article>
            <!-- <article class="card">
        <div class="card-content">
         
          <img class="card-image" src="Images\img2.jpeg" alt="Image 3">
        </div>
      </article> -->
        </div>
    </section>

    <!-- Products and services -->
    <section class="products">
        <div class="header">
            <h2>Other Products </h2>
            <a href="all.html" class="see-all">See All</a>
        </div>
        <div class="container">
            <div class="products-grid" data-aos="zoom-in-down">
                <div class="product" data-product-id="1">
                    <img src="https://i.postimg.cc/85zKR0qC/MIlo-Sachet-square-jpg.jpg" alt="Product 1">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Milo Sachet</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="2">
                    <img src="Images\img5.jpeg" alt="Product 2">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Vegetable</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="3">
                    <img src="Images\img6.jpeg" alt="Product 3">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Yam</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="4">
                    <img src="Images\img7.jpeg" alt="Product 4">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Fruits</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="5">
                    <img src="Images\img3.jpeg" alt="Product 5">
                    <button class="add-to-cart" id="count">Add to cart</button>
                    <h2 class="product-name">Spices</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="6">
                    <img src="Images\img2.jpeg" alt="Product 6">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">plantains</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="7">
                    <img src="https://i.postimg.cc/G3q6PH47/Caption-under-weekend-vibesm-square-jpg.jpg"
                        alt="Product 7">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Mango</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="8">
                    <img src="https://i.postimg.cc/tCJwBpPX/Cassava.jpg" alt="Product 8">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Cassava Dough</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="9">
                    <img src="https://i.postimg.cc/5y07KSXP/frozenstewbeef.jpg" alt="Product 9">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Frozen Beef</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="10">
                    <img src="https://i.postimg.cc/zvcdsHWq/rice.png" alt="Product 10">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Rice</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="11">
                    <img src="https://i.postimg.cc/597kYTrD/Snails.jpg" alt="Product 11">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Snail</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
                <div class="product" data-product-id="12">
                    <img src="https://i.postimg.cc/k5JxYKDD/Salted-fish.png" alt="Product 12">
                    <button class="add-to-cart">Add to cart</button>
                    <h2 class="product-name">Salted Fish</h2>
                    <!-- <button class="order-now"> <a href="order.html">Order Now</a></button> -->
                </div>
            </div>
            <!-- <div class="contact-form" data-aos="zoom-in-left">
        <h2>Fill to order</h2>
        <form>
          <input type="text" placeholder="Name">
          <input type="tel" placeholder="Phone Number">
          <input type="text" placeholder="Name of Items">
          <input type="number" placeholder="Quantity">
          <input type="text" placeholder="Location">
          <textarea placeholder="Address"></textarea>
          <textarea placeholder="Message"></textarea>
          <input type="submit">
        </form>
      </div> -->
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-columns">
                <div class="footer-column">
                    <img src="dromo-logo.png" alt="Company Logo" class="footer-logo">
                    <p>Make an Inquiry: <a href="tel:+2335948155987" class="tel">+2335948155987</a></p>
                    <ul class="social-icons">
                        <li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fab fa-whatsapp"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fa-brands fa-x-twitter"></i></a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <div class="app-icons">
                        <h2 class="app-header">Get Our Apps On</h2>
                        <img src="Images\playstore.jpg" alt="playstore">
                        <img src="Images\appstore.jpg" alt="playstore">
                    </div>
                </div>
                <div class="footer-column">
                    <h2>Payment Methods</h2>
                    <div class="payment-methods">
                        <img src="Images\mobile money.png" alt="momo">
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="year"></span> Dromjor Ventures. All rights reserved.</p>
            <p> <a href="https://www.msoftghana.com/en/" target="_blank" class="from">Powered by Msoft Ghana</a></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || {};  // Load cart items from localStorage or initialize as empty object
            const cartItemsContainer = document.querySelector('.cart-items');
            const cartNotificationSpan = document.getElementById('count');
            const cartStatus = document.getElementById('cart-status');

            // Fetch featured products
            fetch('/api/featured-products')
                .then(response => response.json())
                .then(products => {
                    const productsGrid = document.querySelector('.products-grid');
                    products.forEach(product => {
                        if (product.is_featured || product.category === 'Others') {
                            const productElement = createProductElement(product);
                            productsGrid.appendChild(productElement);
                        }
                    });

                    // Add event listeners to all "Add to cart" buttons
                    const addToCartButtons = document.querySelectorAll('.add-to-cart');
                    addToCartButtons.forEach((button) => {
                        button.addEventListener('click', () => {
                            const product = button.closest('.product');
                            const productId = product.dataset.productId;
                            const productName = product.querySelector('.product-name').textContent;
                            const productImage = product.querySelector('img').src;

                            // If product is already in cart, increase quantity
                            if (cartItems[productId]) {
                                cartItems[productId].quantity++;
                                updateCartItemDisplay(productId);
                            } else {
                                cartItems[productId] = {
                                    name: productName,
                                    image: productImage,
                                    quantity: 1
                                };
                                addNewCartItemToDisplay(productId);
                            }

                            // Update total count and cart status
                            updateTotalCount();
                            updateCartStatus();

                            // Save the cart items to localStorage
                            localStorage.setItem('cartItems', JSON.stringify(cartItems));

                            // Send cart data to the backend
                            sendCartItemToBackend(productId, productName, productImage, cartItems[productId].quantity);

                            // Toastr notification
                            toastr.success(
                                `
                            <div style="display: flex; align-items: center;">
                                <img src="${productImage}" alt="${productName}" style="width: 50px; height: 50px; object-fit: cover; margin-right: 10px; border-radius: 50%;">
                                <span>${productName} has been added to your cart!</span>
                            </div>
                            `,
                                "Added to Cart",
                                {
                                    className: "toast-success animated",
                                }
                            );
                        });
                    });

                    // Load existing cart items from localStorage
                    loadCartItemsFromLocalStorage();
                })
                .catch(error => console.error('Error fetching featured products:', error));

            function createProductElement(product) {
                const productElement = document.createElement("div");
                productElement.className = "product";
                productElement.setAttribute("data-product-id", product.id);

                const productImage = document.createElement("img");
                productImage.src = product.image;
                productImage.alt = product.product_name;
                productElement.appendChild(productImage);

                const addToCartButton = document.createElement("button");
                addToCartButton.className = "add-to-cart";
                addToCartButton.textContent = "Add to cart";
                productElement.appendChild(addToCartButton);

                const productName = document.createElement("h2");
                productName.className = "product-name";
                productName.textContent = product.product_name;
                productElement.appendChild(productName);

                return productElement;
            }

            function updateCartItemDisplay(productId) {
                const cartItemElement = document.querySelector(`.cart-item[data-product-id="${productId}"]`);
                if (cartItemElement) {
                    const quantityElement = cartItemElement.querySelector('.cart-item-quantity');
                    quantityElement.textContent = cartItems[productId].quantity;
                }
            }

            function addNewCartItemToDisplay(productId) {
                const productHTML = `
                <div class="cart-item" data-product-id="${productId}">
                    <div class="cart-item-image-container">
                        <img src="${cartItems[productId].image}" alt="${cartItems[productId].name}">
                        <span class="cart-item-quantity">${cartItems[productId].quantity}</span>
                    </div>
                    <h2>${cartItems[productId].name}</h2>
                    <input type="number" class="cart-item-quantity-input" value="${cartItems[productId].quantity}" min="0" step="1">
                    <span class="remove-item">
                        <i class="fas fa-trash-alt"></i>
                    </span>
                </div>
            `;

                const cartItem = document.createElement("div");
                cartItem.innerHTML = productHTML;

                cartItem.querySelector(".remove-item").addEventListener("click", () => {
                    cartItemsContainer.removeChild(cartItem);
                    delete cartItems[productId];  // Remove item from cart object
                    updateCartItemsCountAndTotal();

                    // Update localStorage after item removal
                    localStorage.setItem('cartItems', JSON.stringify(cartItems));
                });

                cartItemsContainer.appendChild(cartItem);
            }

            function updateTotalCount() {
                const totalCount = Object.values(cartItems).reduce((total, item) => total + item.quantity, 0);
                cartNotificationSpan.textContent = totalCount;
            }

            function updateCartStatus() {
                if (cartItemsContainer.children.length > 0) {
                    cartStatus.textContent = 'You have items in your cart';
                } else {
                    cartStatus.textContent = 'Your cart is empty';
                }
            }

            function updateCartItemsCountAndTotal() {
                updateTotalCount();
                updateCartStatus();
            }

            // Load cart items from localStorage
            function loadCartItemsFromLocalStorage() {
                Object.keys(cartItems).forEach(productId => {
                    addNewCartItemToDisplay(productId);
                });
                updateTotalCount();
                updateCartStatus();
            }

            // Function to send cart data to the backend
            function sendCartItemToBackend(productId, productName, productImage, quantity) {
                const cartData = {
                    name: productName,
                    image: productImage,
                    quantity: quantity,
                    amount: 19.99 // Placeholder amount; 
                };

                fetch('/api/add-to-cart', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(cartData)
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            toastr.error('Failed to save cart item');
                            console.error('Error:', data.error);
                        } else {
                            console.log('Cart item saved successfully');
                        }
                    })
                    .catch(error => {
                        console.error('Error saving cart item');
                        console.error('Error:', error);
                    });
            }
        });
    </script>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
</body>

</html>